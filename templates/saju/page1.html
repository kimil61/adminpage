{% extends "base.html" %}

{% block title %}ë¬´ë£Œ AI ì‚¬ì£¼íŒ”ì ë³´ëŠ” ê³³ ğŸ”® | ë‚˜ì˜ 2025ë…„ ìš´ì„¸ í™•ì¸{% endblock %}

{% block extra_head %}
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Noto Serif KR', serif;
    background: #fdf7ff;
  }

  .saju-container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    padding: 32px;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }

  .saju-title {
    font-size: 32px;
    text-align: center;
    color: #6a1b9a;
    margin-bottom: 24px;
    font-weight: 600;
  }

  .saju-description {
    font-size: 18px;
    line-height: 1.8;
    color: #555;
    margin-bottom: 24px;
  }

  .saju-form {
    margin-top: 32px;
  }

  .form-group {
    margin-bottom: 24px;
  }

  .form-label {
    display: block;
    font-size: 18px;
    color: #333;
    margin-bottom: 8px;
    font-weight: 500;
  }

  .form-input, .form-select {
    width: 100%;
    font-size: 18px;
    padding: 16px;
    border-radius: 8px;
    border: 2px solid #e0e0e0;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
  }

  .form-input:focus, .form-select:focus {
    outline: none;
    border-color: #6a1b9a;
  }

  .birth-date-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
  }

  .submit-btn {
    width: 100%;
    padding: 20px;
    margin-top: 32px;
    background: linear-gradient(135deg, #6a1b9a, #8e24aa);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s ease;
  }

  .submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(106, 27, 154, 0.3);
  }

  .loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.9);
    z-index: 9999;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .spinner {
    width: 60px;
    height: 60px;
    border: 6px solid #e0b3ff;
    border-top: 6px solid #6a1b9a;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .loading-text {
    margin-top: 20px;
    font-size: 18px;
    color: #6a1b9a;
    text-align: center;
  }

  @media (max-width: 768px) {
    .saju-container {
      margin: 16px;
      padding: 24px;
    }
    
    .saju-title {
      font-size: 24px;
    }
    
    .saju-description {
      font-size: 16px;
    }
    
    .birth-date-row {
      grid-template-columns: 1fr;
      gap: 8px;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="saju-container">
  <h1 class="saju-title">ğŸ”® ì‚¬ì£¼íŒ”ìë¥¼ ì•Œê³  ê³„ì‹œë‚˜ìš”?</h1>
  
  <div class="saju-description">
    <p>
      ì‚¬ì£¼íŒ”ìì˜ ë¿Œë¦¬ëŠ” ë©€ë¦¬ <strong>ë‹¹ë‚˜ë¼</strong>ê¹Œì§€ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°‘ë‹ˆë‹¤.<br>
      ì¸ê°„ì´ ì‚´ì•„ê°€ë©° ê²ªëŠ” ê¸°ì¨ê³¼ ìŠ¬í””, ì„±ê³µê³¼ ë°©í™©ì˜ íë¦„ ì†ì—ì„œ  
      ì‚¬ëŒë“¤ì€ 'ì‹œê°„'ê³¼ 'ê¸°ìš´'ì´ ì‚¶ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ë¥¼ í†µì°°í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.
    </p>
    
    <p>
      ê·¸ íë¦„ì€ ì†¡ë‚˜ë¼ì—ì„œ ë”ìš± ì •êµí•´ì¡Œê³ ,  
      <strong>ëª…ë‚˜ë¼</strong>ì—ì„œëŠ” ì´ë¥¼ ì§‘ëŒ€ì„±í•œ ê³ ì „ ã€Š<strong>ä¸‰å‘½é€šä¼š</strong>ã€‹ê°€ íƒ„ìƒí•©ë‹ˆë‹¤.<br>
      ì´ ì±…ì€ ìˆ˜ì²œ ê°œì˜ ì‹¤ì œ ì‚¬ì£¼ ì‚¬ë¡€ë¥¼ í†µí•´  
      ì²œê°„ê³¼ ì§€ì§€ì˜ ì¡°í•©ì´ ì¸ìƒì— ì–´ë–»ê²Œ ì‘ìš©í•˜ëŠ”ì§€ë¥¼ ê¸°ë¡í•œ ëª…ë¦¬í•™ì˜ ë°±ê³¼ì‚¬ì „ì…ë‹ˆë‹¤.
    </p>
    
    <div style="text-align: center; margin: 32px 0;">
      <img src="/static/assets/smth.jpg" alt="ì‚¼ëª…í†µíšŒ ê³ ì„œ ì´ë¯¸ì§€" 
           style="max-width: 100%; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
      <p style="font-size: 14px; color: #777; margin-top: 8px;">
        â–² ëª…ë¦¬í•™ ê³ ì„œ ã€Šä¸‰å‘½é€šä¼šã€‹ ì¼ë¶€ ì´ë¯¸ì§€. ì‹œëŒ€ë¥¼ ë„˜ì–´ ì „í•´ì§€ëŠ” ì§€í˜œ.
      </p>
    </div>
    
    <p style="color: #6a1b9a; font-weight: 600;">
      ì‹œëŒ€ëŠ” ë³€í•´ë„, ì¸ê°„ì˜ ë³¸ì§ˆì€ ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
      ì‚¬ë‘ì— ì„¤ë ˆê³ , ì„ íƒ ì•ì— ë¨¸ë­‡ê±°ë¦¬ë©°,  
      ê´€ê³„ ì†ì—ì„œ ê³ ë¯¼í•˜ëŠ” ë§ˆìŒì€ ìˆ˜ì²œ ë…„ ì „ì´ë‚˜ ì§€ê¸ˆì´ë‚˜ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </p>
  </div>

  <form method="post" class="saju-form" id="sajuForm">
    <div class="form-group">
      <label class="form-label">ì´ë¦„ (ì„ íƒ)</label>
      <input type="text" name="name" class="form-input" placeholder="ì´ë¦„ ì…ë ¥ì€ ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤ ğŸ˜Š">
    </div>

    <div class="form-group">
      <label class="form-label">ì„±ë³„ *</label>
      <select name="gender" class="form-select" required>
        <option value="">ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
        <option value="male">ë‚¨ì</option>
        <option value="female">ì—¬ì</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label">ìƒë…„ì›”ì¼ (ì–‘ë ¥) *</label>
      <div class="birth-date-row">
        <select name="birth_year" class="form-select" required id="birthYear">
          <option value="">ë…„ë„</option>
          {% for y in range(1920, 2025) %}
            <option value="{{ y }}" {% if y == default_year %}selected{% endif %}>{{ y }}ë…„</option>
          {% endfor %}
        </select>

        <select name="birth_month" class="form-select" required id="birthMonth">
          <option value="">ì›”</option>
          {% for m in range(1, 13) %}
            <option value="{{ m }}" {% if m == default_month %}selected{% endif %}>{{ m }}ì›”</option>
          {% endfor %}
        </select>

        <select name="birth_day" class="form-select" required id="birthDay">
          <option value="">ì¼</option>
          {% for d in range(1, 32) %}
            <option value="{{ d }}" {% if d == default_day %}selected{% endif %}>{{ d }}ì¼</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">ì¶œìƒ ì‹œê°„ *</label>
      <select name="birthhour" class="form-select" required>
        <option value="">ì¶œìƒ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
        <option value="12">ëª¨ë¦„</option>
        {% for h in range(0, 24) %}
          <option value="{{ h }}">{{ h }}ì‹œ</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="submit-btn">ğŸ”® ìš´ì„¸ ë³´ëŸ¬ê°€ê¸°</button>
  </form>
</div>

<div class="loading-overlay" id="loadingOverlay">
  <div class="spinner"></div>
  <div class="loading-text">
    ë‹¹ì‹ ì˜ ìš´ëª…ì„ í•´ì„í•˜ëŠ” ì¤‘ì´ì—ìš”... ğŸ”®<br>
    ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš” ğŸ™
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
// í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ
document.getElementById('sajuForm').addEventListener('submit', function() {
  document.getElementById('loadingOverlay').style.display = 'flex';
});

// ìƒë…„ì›”ì¼ ìœ íš¨ì„± ê²€ì‚¬
function updateDays() {
  const year = parseInt(document.getElementById('birthYear').value);
  const month = parseInt(document.getElementById('birthMonth').value);
  const daySelect = document.getElementById('birthDay');
  
  if (!year || !month) return;
  
  const daysInMonth = new Date(year, month, 0).getDate();
  const currentDay = daySelect.value;
  
  daySelect.innerHTML = '<option value="">ì¼</option>';
  for (let i = 1; i <= daysInMonth; i++) {
    const selected = (i == currentDay) ? 'selected' : '';
    daySelect.innerHTML += `<option value="${i}" ${selected}>${i}ì¼</option>`;
  }
}

document.getElementById('birthYear').addEventListener('change', updateDays);
document.getElementById('birthMonth').addEventListener('change', updateDays);

// í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ê°’ ì„¤ì •
window.addEventListener('DOMContentLoaded', function() {
  updateDays();
});
</script>
{% endblock %}