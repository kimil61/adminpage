<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}🔮 AI 사주팔자 | 전통과 AI의 만남{% endblock %}</title>
    <meta name="description" content="고서 원문과 AI가 만나 당신만의 사주를 분석합니다. 삼명통회 기반 정통 해석 + 현대적 AI 분석">
    <meta name="keywords" content="사주, AI, 팔자, 삼명통회, 전통, 분석, 짝궁">
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/static/css/style.css" rel="stylesheet">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    {% block extra_head %}{% endblock %}
</head>
<body class="antialiased flex flex-col min-h-screen">

    <!-- Navbar -->
    <nav class="bg-gray-800 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-14">
                <div class="flex items-center space-x-8">
                    <a href="/" class="text-lg font-semibold">infoWow.kr</a>
                    <div class="hidden md:flex space-x-6">
                        <a href="/" class="hover:text-gray-300">홈</a>
                        <a href="/blog" class="hover:text-gray-300">블로그</a>
                        <a href="/saju/page1" class="hover:text-gray-300">🔮 사주팔자</a> <!-- 이 라인 추가 -->
                        <a href="/order/mypage" class="text-gray-700 hover:text-purple-600">구매내역</a>

                    </div>
                </div>

                <!-- Mobile toggle -->
                <div class="md:hidden">
                    <button id="navToggle" class="focus:outline-none">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>

                <!-- Right menu -->
                <ul class="hidden md:flex items-center space-x-4">
                    {% if request.session.get('user_id') %}
                        <li class="relative group">
                            <button class="flex items-center space-x-1 focus:outline-none">
                                <span>{{ request.session.get('username') }}</span>
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                          d="M5.23 7.21a.75.75 0 011.06.02L10 11.585l3.71-4.354a.75.75 0 011.138.976l-4 4.7a.75.75 0 01-1.138 0l-4-4.7a.75.75 0 01.02-1.06z"
                                          clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <ul
                                class="absolute right-0 w-40 bg-white text-gray-700 rounded shadow-lg hidden group-hover:block">
                                {% if request.session.get('is_admin') %}
                                    <li><a href="/admin/" class="block px-4 py-2 hover:bg-gray-100">관리자</a></li>
                                {% endif %}
                                <li><hr class="border-gray-200"></li>
                                <li><a href="/logout" class="block px-4 py-2 hover:bg-gray-100">로그아웃</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li><a href="/login" class="hover:text-gray-300">로그인</a></li>
                        <li><a href="/register" class="hover:text-gray-300">회원가입</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobileMenu" class="md:hidden hidden px-4 pb-4 space-y-2">
            <a href="/" class="block hover:text-gray-300">홈</a>
            <a href="/blog" class="block hover:text-gray-300">블로그</a>
            <a href="/saju/page1" class="block hover:text-gray-300">🔮 사주팔자</a>
            {% if request.session.get('user_id') %}
                {% if request.session.get('is_admin') %}
                    <a href="/admin/" class="block hover:text-gray-300">관리자</a>
                {% endif %}
                <a href="/logout" class="block hover:text-gray-300">로그아웃</a>
            {% else %}
                <a href="/login" class="block hover:text-gray-300">로그인</a>
                <a href="/register" class="block hover:text-gray-300">회원가입</a>
            {% endif %}
        </div>
    </nav>

    <!-- Main -->
    <main class="flex-1 max-w-7xl mx-auto px-4 py-6">
        {% with messages = get_flashed_messages(request) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="mb-4 flex items-start justify-between rounded px-4 py-3 text-sm
                        {% if category == 'error' %}
                            bg-red-100 text-red-800
                        {% elif category == 'success' %}
                            bg-green-100 text-green-800
                        {% else %}
                            bg-blue-100 text-blue-800
                        {% endif %}">
                        <span>{{ message }}</span>
                        <button type="button" class="font-bold leading-none" onclick="this.parentElement.remove()">&times;</button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>🔮 AI 사주팔자</h3>
                    <p style="color: #a0aec0; margin-bottom: 1rem;">
                        전통 명리학과 AI 기술의 만남<br>
                        정확하고 현대적인 사주 해석 서비스
                    </p>
                </div>
                
                <div class="footer-section">
                    <h3>서비스</h3>
                    <a href="/saju/page1">AI 사주 분석</a>
                    <a href="#pricing">가격 안내</a>
                    <a href="/order/mypage">마이페이지</a>
                    <a href="/blog">사주 블로그</a>
                </div>
                
                <div class="footer-section">
                    <h3>고객지원</h3>
                    <a href="#faq">자주 묻는 질문</a>
                    <a href="/contact">문의하기</a>
                    <a href="/privacy">개인정보처리방침</a>
                    <a href="/terms">이용약관</a>
                </div>
                
                <div class="footer-section">
                    <h3>연결하기</h3>
                    <a href="#" onclick="alert('준비 중입니다!')">📧 이메일 문의</a>
                    <a href="#" onclick="alert('준비 중입니다!')">📱 카카오톡 채널</a>
                    <a href="#" onclick="alert('준비 중입니다!')">📝 네이버 블로그</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 SkyLoom | 대표자: 김일 | 사업자등록번호: 812-72-00526</p>
                <p>인천광역시 미추홀구 낙섬동로 134, 105동 403호(용현동)</p>
                <p>대표전화: 02-881-0775 | 이메일: help@infowow.kr</p>
                <p style="margin-top: 0.5rem; font-size: 0.875rem;">
                    이 서비스는 전통 명리학을 기반으로 하되, 참고용으로만 활용해주세요.
                </p>
            </div>
        </div>
    </footer>
    {% block extra_scripts %}{% endblock %}
    <!-- Naver Analytics -->
    <script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
    <script type="text/javascript">
        if(!wcs_add) var wcs_add = {};
            wcs_add["wa"] = "125dbd7ba328b60";
        if(window.wcs) {
            wcs_do();
        }
    </script>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EK53P8DPEK"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EK53P8DPEK');
    </script>
    <script>
        // mobile nav toggle
        document.getElementById('navToggle').addEventListener('click', () => {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        });
    </script>


</body>
</html>
